(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8Zg5":function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".user-logo[data-v-5bfdc148]{border-radius:50%}",""])},F3cj:function(t,e,s){"use strict";s("kd/o")},XLHe:function(t,e,s){"use strict";s.r(e);var i={name:"ButtonInvite",props:{userId:Number,crewId:Number,disabled:{type:Boolean,default:!1},callback:{type:Function,default:function(){}},noLabel:Boolean,btnSize:String,btnClass:{type:String,default:"rounded-xl font-weight-bold "},btnClassNotSelected:{type:String,default:"btn-outline-primary"},btnClassSelected:{type:String,default:"border-2 btn-primary"},status:String},data:function(){return{loading:!1,hover:!1}},computed:{getSizeClass:function(){return this.btnSize?"btn-"+this.btnSize:""},getLabel:function(){var t="<i class='icon fas fa-user-plus'></i>",e="Inviter dans le crew";return"JOINED"===this.status?(t="<i class='icon fas fa-user-check'></i>",this.hover?(t="<i class='icon fas fa-times'></i>",e="Enlever du crew"):e="Dans le crew"):"PENDING"===this.status&&(t='<i class="far fa-clock"></i>',e="Invitation envoyée"),this.noLabel?t:t+" "+e},selected:function(){return"JOINED"===this.status||"PENDING"===this.status}},methods:{inviteUser:function(){var t=this;this.loading=!0,axios.post("/api/crew/"+this.crewId+"/invite-user",{user_id:this.$props.userId}).then((function(e){t.isInCrew=e.data,t.loading=!1})).catch((function(e){toastr.error(manage_errors(e.response.data)),t.loading=!1})),this.callback&&this.callback(this.isInCrew)}}},a=s("KHd+"),n=Object(a.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group",attrs:{role:"group"}},[s("button",{staticClass:"text-truncate btn text-uppercase",class:[t.selected?t.btnClassSelected:t.btnClassNotSelected,t.btnClass,t.getSizeClass],attrs:{type:"button",disabled:t.loading},on:{click:t.inviteUser,mouseover:function(e){t.hover=!0},mouseout:function(e){t.hover=!1}}},[!1===t.loading?s("span",{domProps:{innerHTML:t._s(t.getLabel)}}):s("kd-loader",{staticClass:"spinner-grow-sm"})],1)])}),[],!1,null,null,null).exports,r=s("k+zd"),o={name:"ModalInvite",components:{ButtonInvite:n},props:{crew_id:Number,event_id:Number,invite_type:String,invite_id:Number,onClose:Function,callback:Function},mounted:function(){var t=this;$(this.$el).modal(),$(this.$el).on("hidden.bs.modal",(function(){t.$props.callback&&t.$props.callback(),t.$props.onClose()}))},data:function(){return{data:[],value:"",loading:!1,userType:r.c,eventType:r.b,crewType:r.a}},methods:{getSearch:function(){var t=this;this.loading=!0;var e={value:this.value};this.$props.crew_id&&(e.crew_id=this.$props.crew_id),this.$props.event_id&&(e.event_id=this.$props.event_id),axios.get("/api/search/"+this.invite_type,{params:e}).then((function(e){t.list=e.data.data,t.loading=!1}))},onUserClick:function(t){this.$store.commit("setModal",{type:"user",value:{show:!0,userId:t}})}},watch:{value:function(t){this.loading=!0,t||(this.data=[]),this.getSearch(t)}}},l=(s("F3cj"),Object(a.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered modal-sm",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 d-flex align-items-center justify-content-center flex-column"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])]),t._v(" "),t.loading?s("div",{staticClass:"d-flex align-items-center justify-content-center"},[s("loader")],1):0===t.data.length?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-center"},[t._v("\n                            Aucun utilisateur trouvé.\n                        ")])]):s("div",{staticClass:"row"},[t.invite_type===t.userType?t._l(t.data,(function(e){return s("div",{staticClass:"col-md-6 col-12"},[s("div",{staticClass:"border rounded-lg mb-3 p-3"},[s("a",{staticClass:"d-flex align-items-center text-decoration-none",attrs:{target:"_blank"},on:{click:function(){return t.onUserClick(e.id)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.logo,expression:"item.logo"}],staticClass:"rounded-circle shadow-sm mr-3",attrs:{height:"55"}}),t._v(" "),s("div",[s("h6",{staticClass:"m-0"},[t._v("\n                                                "+t._s(e.username)+"\n                                            ")])])]),t._v(" "),s("button-invite",{staticClass:"mt-3",attrs:{"btn-size":"sm","user-id":e.id,"crew-id":e.id,"is-in-crew":e.is_in_crew},on:{"update:isInCrew":function(s){return t.$set(e,"is_in_crew",s)},"update:is-in-crew":function(s){return t.$set(e,"is_in_crew",s)}}})],1)])})):t._e(),t._v(" "),t.invite_type===t.eventType?t._l(t.data,(function(t){return s("div",{staticClass:"col-md-6 col-12"})})):t._e(),t._v(" "),t.invite_type===t.crewType?t._l(t.data,(function(t){return s("div",{staticClass:"col-md-6 col-12"})})):t._e()],2)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,"5bfdc148",null));e.default=l.exports},"k+zd":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n}));var i="crew",a="event",n="user"},"kd/o":function(t,e,s){var i=s("8Zg5");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(i,a);i.locals&&(t.exports=i.locals)}}]);